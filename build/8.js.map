{"version":3,"sources":["../../src/pages/language-settings/language-settings.module.ts","../../src/pages/language-settings/language-settings.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LanguageSettings } from './language-settings';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport {Http} from '@angular/http';\n\n@NgModule({\n  declarations: [\n    LanguageSettings,\n  ],\n  imports: [\n    IonicPageModule.forChild(LanguageSettings),\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: (createTranslateLoader),\n        deps: [Http]\n      }\n    })\n  ],\n  exports: [\n    LanguageSettings\n  ]\n})\nexport class LanguageSettingsModule {}\n\n// required for ng translate, tells it to look in assets folder for trans files\nexport function createTranslateLoader(http: Http) {\n    return new TranslateHttpLoader(http, 'assets/i18n/', '.json');\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/language-settings/language-settings.module.ts","import {Component} from '@angular/core';\nimport {ViewController, ToastController, IonicPage} from 'ionic-angular';\nimport {Storage} from '@ionic/storage';\nimport {TranslateService} from '@ngx-translate/core';\n\n@IonicPage()\n@Component({\n  templateUrl: 'language-settings.html',\n  selector: 'language-settings'\n})\nexport class LanguageSettings {\n\n  languages: any;\n\n  constructor( \n    public storage: Storage,\n    public viewCtrl: ViewController,\n    public toastCtrl: ToastController,\n    public translate: TranslateService\n    ) {\n    \n  }\n\n  ionViewWillEnter() {\n    this.getLanguages()\n  }\n\n  // first get existing checked segments\n  getLanguages() {\n\n    this.languages = null\n  \n    // Get languages, these are sent from WP site through postMessage in main component\n    this.storage.get('available_languages').then( langs => {\n\n      if(langs) {\n        // this.languages = langs\n        this.checkCurrent( langs )\n      }\n\n    })\n    \n  }\n\n  checkCurrent( langs ) {\n\n    this.storage.get( 'app_language' ).then( lang => {\n\n      if( lang ) {\n        // we have an existing language, check it and return languages\n        for (var i = langs.length - 1; i >= 0; i--) {\n\n          // if language codes match, save as checked\n          if( langs[i].code === lang )\n            langs[i].checked = true\n\n        }\n        \n      }\n\n      this.languages = langs\n      \n    })\n\n  }\n\n  toggleLanguage( event, language ) {\n\n    this.translate.use( language.code )\n    this.storage.set( 'app_language', language.code )\n\n    this.presentToast('Language changed')\n\n  }\n\n  presentToast(msg) {\n\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 5000,\n      position: 'bottom'\n    });\n\n    toast.present();\n\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/language-settings/language-settings.ts"],"sourceRoot":""}